<div class="min-h-screen bg-white">
  <navbar></navbar>

  <main class="container mx-auto max-w-2xl px-4 py-8">
    <h1 class="josefin-font mb-5 text-center text-4xl font-bold tracking-wider">
      {{ isEditMode ? 'Editar Comida' : 'Registro de comidas' }}
    </h1>

    <div>
      <label for="idopinion" class="josefin-font mb-8 text-center text-xl font-bold tracking-wider">ID de la opinión a eliminar</label>
      <input
        id="idopinion"
        type="number"
        [(ngModel)]="idopinion"
        class="w-full rounded-2xl bg-[#D9D9D9] p-2"
      />
      <div *ngIf="idopinion && idopinion <= 0" class="text-red-500 text-sm">
        El ID debe ser un número válido.
      </div>
    </div>

    <div class="flex justify-center gap-4 mt-6">
      <button
        type="button"
        class="rounded bg-red-500 px-6 py-3 text-white hover:bg-red-600"
        (click)="deleteOpinion()"
      >
        Eliminar Opinión
      </button>
    </div>


    <form [formGroup]="menuForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <div class="space-y-4">
        <div>
          <label for="nombre" class="josefin-font mb-8 text-center text-xl font-bold tracking-wider">Nombre de la comida</label>
          <input
            id="nombre"
            formControlName="nombre"
            type="text"
            class="w-full rounded-2xl bg-[#D9D9D9] p-2"
          />
          <div *ngIf="menuForm.get('nombre')?.invalid && menuForm.get('nombre')?.touched" class="text-red-500 text-sm">
            Nombre es requerido y debe tener un máximo de 50 caracteres.
          </div>
        </div>

        <div>
          <label for="precio" class="josefin-font mb-8 text-center text-xl font-bold tracking-wider">Precio</label>
          <input
            id="precio"
            formControlName="precio"
            type="number"
            class="w-full rounded-2xl bg-[#D9D9D9] p-2"
            placeholder=""
          />
          <div *ngIf="menuForm.get('precio')?.invalid && menuForm.get('precio')?.touched" class="text-red-500 text-sm">
            Precio debe ser mayor a 0.
          </div>
        </div>

        <div>
          <label for="descripcion" class="josefin-font mb-8 text-center text-xl font-bold tracking-wider">¿Cómo describirías tu platillo?</label>
          <input
            id="descripcion"
            formControlName="descripcion"
            type="text"
            class="w-full rounded-2xl bg-[#D9D9D9] p-6"
          />
          <div *ngIf="menuForm.get('descripcion')?.invalid && menuForm.get('descripcion')?.touched" class="text-red-500 text-sm">
            Descripción es requerida y debe tener un máximo de 200 caracteres.
          </div>
        </div>
      </div>

      <div class="flex justify-center gap-4">

      </div>

      <div class="space-y-4">
        <h2 class="josefin-font mb-8 text-center text-xl font-bold tracking-wider">Sube una foto de tu platillo</h2>

        <div class="grid gap-4">
          <div class="h-40 w-full bg-[#D9D9D9] rounded-lg flex items-center justify-center">
            <ng-container *ngIf="selectedFile">
              <img
                [src]="selectedFilePreview"
                alt="Imagen seleccionada"
                class="h-full w-full object-cover rounded-lg"
              />
            </ng-container>
            <ng-container *ngIf="!selectedFile">
              <p class="text-sm text-gray-700">No hay imagen seleccionada</p>
            </ng-container>
          </div>

          <label
            for="file-upload"
            class="flex h-32 w-full cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-400 bg-[#D9D9D9] hover:border-blue-500 hover:bg-gray-200"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="h-8 w-8 text-gray-600"
            >
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
            <input
              id="file-upload"
              type="file"
              class="hidden"
              (change)="onFileSelected($event)"
              accept="image/*"
            />
          </label>
        </div>

        <div class="flex justify-center gap-4 mt-6">
          <button
            type="submit"
            class="rounded bg-[#1E3A5F] px-6 py-3 text-white hover:bg-[#182e48]"
          >
            {{ isEditMode ? 'Actualizar Platillo' : 'Crear Platillo' }}
          </button>
          <button
            type="button"
            class="rounded bg-[#D9D9D9] px-6 py-3 text-gray-700 hover:bg-gray-400"
            (click)="onCancel()"
          >
            Cancelar
          </button>
        </div>
      </div>


    </form>
  </main>
</div>
